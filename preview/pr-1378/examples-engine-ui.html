<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Examples &raquo; Engine &raquo; UI | Cubos Docs</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="Favicon.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <span id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">
        <a href="https://cubosengine.org"><img src="Favicon.png" alt="" />Cubos</a> <span class="m-breadcrumb">|</span> <a href="index.html" class="m-thin">Docs</a>
      </span>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="modules.html">Modules</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="examples.html">Examples</a> &raquo;</span>
          <span class="m-breadcrumb"><a href="examples-engine.html">Engine</a> &raquo;</span>
          UI
        </h1>
        <p>Using the <a href="group__ui-canvas-plugin.html" class="m-doc">Canvas</a> plugin.</p>
<p><a name="md_ui_page"></a></p><aside class="m-note m-default"><h4>See also</h4><p>Full source code <a href="https://github.com/GameDevTecnico/cubos/tree/main/engine/samples/ui">here</a>.</p></aside><p>This example shows how the <a href="group__ui-canvas-plugin.html" class="m-doc">Canvas</a> plugin can be used to create ui elements on screen. It also uses the <a href="group__ui-color-rect-plugin.html" class="m-doc">Color Rect</a> plugin to draw those elements to screen.</p><pre class="m-code"><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">canvas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">commands</span><span class="p">.</span><span class="n">create</span><span class="p">().</span><span class="n">add</span><span class="p">(</span><span class="n">UICanvas</span><span class="p">{}).</span><span class="n">add</span><span class="p">(</span><span class="n">RenderTarget</span><span class="p">{}).</span><span class="n">entity</span><span class="p">();</span></pre><p>We start by setting up a <a href="structcubos_1_1engine_1_1UICanvas.html" class="m-doc">cubos::<wbr />engine::<wbr />UICanvas</a>. This will serve as a target to which the elements will be drawn to.</p><pre class="m-code"><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">elementBg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">commands</span><span class="p">.</span><span class="n">create</span><span class="p">()</span>
<span class="w">                             </span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">UIElement</span><span class="p">{.</span><span class="n">layer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-2</span><span class="p">})</span>
<span class="w">                             </span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">UIHorizontalStretch</span><span class="p">{</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">})</span>
<span class="w">                             </span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">UIVerticalStretch</span><span class="p">{</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">})</span>
<span class="w">                             </span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">UIColorRect</span><span class="p">{{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">}})</span>
<span class="w">                             </span><span class="p">.</span><span class="n">entity</span><span class="p">();</span>
<span class="w">        </span><span class="n">commands</span><span class="p">.</span><span class="n">relate</span><span class="p">(</span><span class="n">elementBg</span><span class="p">,</span><span class="w"> </span><span class="n">canvas</span><span class="p">,</span><span class="w"> </span><span class="n">ChildOf</span><span class="p">{});</span></pre><p>Now we can set up a background, with a <a href="structcubos_1_1engine_1_1UIElement.html" class="m-doc">cubos::<wbr />engine::<wbr />UIElement</a>. We want it to cover the whole screen, so we&#x27;ll add both a <a href="structcubos_1_1engine_1_1UIHorizontalStretch.html" class="m-doc">cubos::<wbr />engine::<wbr />UIHorizontalStretch</a> and a <a href="structcubos_1_1engine_1_1UIVerticalStretch.html" class="m-doc">cubos::<wbr />engine::<wbr />UIVerticalStretch</a> componenets. These will make sure our background&#x27;s size will always match that of the canvas. For extra style, we can add a little border around it, by setting the margins of the components to 20.</p><p>We can add a <a href="structcubos_1_1engine_1_1UIColorRect.html" class="m-doc">cubos::<wbr />engine::<wbr />UIColorRect</a> to that entity and have the background be drawn in white.</p><p>Finally, we have to set this UIElement as a child of the entity holding the canvas.</p><p>Besides the stretch components, the <a href="structcubos_1_1engine_1_1UIElement.html" class="m-doc">cubos::<wbr />engine::<wbr />UIElement</a> has some fields to control its placement.</p><pre class="m-code"><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">elementPanel</span><span class="w"> </span><span class="o">=</span>
<span class="w">            </span><span class="n">commands</span><span class="p">.</span><span class="n">create</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">UIElement</span><span class="p">{</span>
<span class="w">                    </span><span class="p">.</span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">-50</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span><span class="w"> </span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">600</span><span class="p">},</span><span class="w"> </span><span class="p">.</span><span class="n">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5F</span><span class="p">},</span><span class="w"> </span><span class="p">.</span><span class="n">anchor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5F</span><span class="p">},</span><span class="w"> </span><span class="p">.</span><span class="n">layer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-1</span><span class="p">})</span>
<span class="w">                </span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">UIColorRect</span><span class="p">{{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">}})</span>
<span class="w">                </span><span class="p">.</span><span class="n">entity</span><span class="p">();</span>
<span class="w">        </span><span class="n">commands</span><span class="p">.</span><span class="n">relate</span><span class="p">(</span><span class="n">elementPanel</span><span class="p">,</span><span class="w"> </span><span class="n">elementBg</span><span class="p">,</span><span class="w"> </span><span class="n">ChildOf</span><span class="p">{});</span></pre><p>Here we create a small panel to the right side of the screen. The anchor is set to <code>1, 0.5</code>. This will mean that the panel&#x27;s pivot will be placed on the very right edge of its parent, and in the middle vertically. Then the pivot itself is set to also be <code>1, 0.5</code>. This will mean that the UIElement will &quot;grow&quot; to the left horizontally, and equally up and down vertically. This is because by setting that value, we are effectively telling the UI element its pivot will be on its right edge, in the middle point of it. We set the offset to be <code>0, -50</code>, so that we leave a little space to the right of the it before the edge of its parent. This space will be constant regardless of the parent&#x27;s size. Finally, we se the size of the element to be <code>200, 600</code>.</p><p>We set this panel as child of the background, and we&#x27;ll paint it red.</p><p>Next let&#x27;s add an image.</p><pre class="m-code"><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">logo</span><span class="w"> </span><span class="o">=</span>
<span class="w">            </span><span class="n">commands</span><span class="p">.</span><span class="n">create</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">UIElement</span><span class="p">{.</span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">-50</span><span class="p">},</span><span class="w"> </span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">},</span><span class="w"> </span><span class="p">.</span><span class="n">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span><span class="w"> </span><span class="p">.</span><span class="n">anchor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span><span class="w"> </span><span class="p">.</span><span class="n">layer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-1</span><span class="p">})</span>
<span class="w">                </span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">UIImage</span><span class="p">{</span><span class="n">AnyAsset</span><span class="p">(</span><span class="s">&quot;50423317-a543-4614-9f4e-c2df975f5c0d&quot;</span><span class="p">)})</span>
<span class="w">                </span><span class="p">.</span><span class="n">entity</span><span class="p">();</span>
<span class="w">        </span><span class="n">commands</span><span class="p">.</span><span class="n">relate</span><span class="p">(</span><span class="n">logo</span><span class="p">,</span><span class="w"> </span><span class="n">elementBg</span><span class="p">,</span><span class="w"> </span><span class="n">ChildOf</span><span class="p">{});</span></pre><p>To add an image, it&#x27;s a simple matter of adding a <a href="structcubos_1_1engine_1_1UIImage.html" class="m-doc">cubos::<wbr />engine::<wbr />UIImage</a> component to an element, with the handle to an image asset. It will then be drawn onto that element&#x27;s rect.</p><p>We might, however, want to make sure that the image will retain its aspect ratio without having to manually adjust the element&#x27;s size. The solution for that is the <a href="structcubos_1_1engine_1_1UINativeAspectRatio.html" class="m-doc">cubos::<wbr />engine::<wbr />UINativeAspectRatio</a> component. What it does is size down the element to have a size that is in line with the source file&#x27;s aspect ratio.</p><aside class="m-note m-info"><h4>Note</h4><p><a href="structcubos_1_1engine_1_1UINativeAspectRatio.html" class="m-doc">cubos::<wbr />engine::<wbr />UINativeAspectRatio</a> will behave differently when attached to a <a href="structcubos_1_1engine_1_1UIHorizontalStretch.html" class="m-doc">cubos::<wbr />engine::<wbr />UIHorizontalStretch</a> or a <a href="structcubos_1_1engine_1_1UIVerticalStretch.html" class="m-doc">cubos::<wbr />engine::<wbr />UIVerticalStretch</a> component. It will keep the dimension that is being stretched, and alter the other one, which can result in either sizing up or down the element. In case both UIHorizontalStretch and UIVerticalStretch are present, UINativeAspectRatio will return to sizing the element down.</p></aside><pre class="m-code"></pre><p>For this we will the use the extended version of our logo, which is rectangular. You&#x27;ll notice that the UIElement it&#x27;s being attached to is a square, but due to the UINativeAspectRatio component, that square will be sized down into proper shape.</p><aside class="m-note m-info"><h4>Note</h4><p>The <a href="structcubos_1_1engine_1_1UINativeAspectRatio.html" class="m-doc">cubos::<wbr />engine::<wbr />UINativeAspectRatio</a> is transformative. If you desire to keep the original size of the element information for other uses, it might be best to have the image instead be on a child entity of that element, and use both <a href="structcubos_1_1engine_1_1UIHorizontalStretch.html" class="m-doc">cubos::<wbr />engine::<wbr />UIHorizontalStretch</a> and <a href="structcubos_1_1engine_1_1UIVerticalStretch.html" class="m-doc">cubos::<wbr />engine::<wbr />UIVerticalStretch</a> to achieve the same effect.</p></aside><img class="m-image" src="ui_output.png" alt="Image" /><p>Another important thing to keep in mind while building the UI is how it is going to adapt to different resolutions and aspect ratios.</p><p>You can do this by using a set of components that when added to an entity with a UICanvas will change how it handles these differences. In this sample, you can change which is being used by pressing the shortcut numbers in the first collumn. All these components are meant to be used exclusively, meaning that no more than one should be present in one entity.</p><table class="m-table"><thead><tr><th>Shortcut</th><th>Mode</th><th>Component</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td>Stretch</td><td>None - Canvas defaults to this when no other component is present</td><td>Canvas is stretch to fit the window. Will warp elements.</td></tr><tr><td>2</td><td>Keep Pixel Size</td><td><a href="structcubos_1_1engine_1_1UIKeepPixelSize.html" class="m-doc">UIKeepPixelSize</a></td><td>Distances to anchors are constant. Might cause overlap between elements with different anchors.</td></tr><tr><td>3</td><td>Match Height</td><td><a href="structcubos_1_1engine_1_1UIMatchHeight.html" class="m-doc">UIMatchHeight</a></td><td>Vertical proportions are kept. Width is adjusted to keep each element&#x27;s aspect ratio.</td></tr><tr><td>4</td><td>Match Width</td><td><a href="structcubos_1_1engine_1_1UIMatchWidth.html" class="m-doc">UIMatchWidth</a></td><td>Horizontal proportions are kept. Height is adjusted to keep each element&#x27;s aspect ratio.</td></tr><tr><td>5</td><td>Expand</td><td><a href="structcubos_1_1engine_1_1UIExpand.html" class="m-doc">UIExpand</a></td><td>Switches between matching height or matching width, depending on which will cause the elements to reduce in size.</td></tr></tbody></table>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v2.js"></script>
<script src="searchdata-v2.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Cubos Docs. Created with <a href="https://doxygen.org/">Doxygen</a> 1.9.1 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
