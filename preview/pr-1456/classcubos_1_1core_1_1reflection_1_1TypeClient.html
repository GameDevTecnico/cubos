<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>cubos::core::reflection::TypeClient class | Cubos Docs</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="Favicon.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <span id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">
        <a href="https://cubosengine.org"><img src="Favicon.png" alt="" />Cubos</a> <span class="m-breadcrumb">|</span> <a href="index.html" class="m-thin">Docs</a>
      </span>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="modules.html">Modules</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="namespacecubos.html">cubos</a>::<wbr/></span><span class="m-breadcrumb"><a href="namespacecubos_1_1core.html">core</a>::<wbr/></span><span class="m-breadcrumb"><a href="namespacecubos_1_1core_1_1reflection.html">reflection</a>::<wbr/></span>TypeClient <span class="m-thin">class</span> <span class="m-label m-flat m-warning">final</span>
          <div class="m-doc-include m-code m-inverted m-text-right"><span class="cp">#include</span> <a class="cpf" href="type__client_8hpp.html">&lt;core/reflection/type_client.hpp&gt;</a></div>
        </h1>
        <p>Manages the client-side of a reflection channel on top of a stream.</p>
        <nav class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#pub-types">Public types</a></li>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
              </ul>
            </li>
          </ul>
        </nav>
<p>This class allows the client to receive type information of types unknown by the client from the server. It also makes it possible to then receive and send values of these types.</p><p>Received types can be either structured or non-structured. Only values of structured types can be communicated between the client and the server. For a type to be structured, it must have a structural trait, so that the client can create new instances of the type.</p><p>Structural traits are traits which define the memory layout of a type. A structural trait should add the <a href="structcubos_1_1core_1_1reflection_1_1TypeClient_1_1RemoteTrait.html" class="m-doc">TypeClient::<wbr />RemoteTrait</a> trait to the type. This trait is then used by this class to create a <a href="classcubos_1_1core_1_1reflection_1_1ConstructibleTrait.html" class="m-doc">ConstructibleTrait</a> for the type.</p><p>See <a href="classcubos_1_1core_1_1reflection_1_1TypeServer.html" class="m-doc">TypeServer</a> for more information on the protocol.</p>
        <section id="pub-types">
          <h2><a href="#pub-types">Public types</a></h2>
          <dl class="m-doc">
            <dt id="a42c8334706c1c7f49f19f20a0a7fef59">
              using <a href="#a42c8334706c1c7f49f19f20a0a7fef59" class="m-doc-self">Deserialize</a> = <a href="classcubos_1_1core_1_1memory_1_1Function.html" class="m-doc">memory::<wbr />Function</a>&lt;bool(const <a href="classcubos_1_1core_1_1reflection_1_1TypeRegistry.html" class="m-doc">TypeRegistry</a>&amp;, <a href="classcubos_1_1core_1_1reflection_1_1Type.html" class="m-doc">Type</a>&amp;, <a href="classcubos_1_1core_1_1data_1_1Deserializer.html" class="m-doc">data::<wbr />Deserializer</a>&amp;) const &gt;
            </dt>
            <dd>Function type for deserializing traits.</dd>
            <dt id="ab928ed73a21229d942cbfbac60a6ca1c">
              using <a href="#ab928ed73a21229d942cbfbac60a6ca1c" class="m-doc-self">DiscoverTypes</a> = void(*)(const <a href="classcubos_1_1core_1_1reflection_1_1Type.html" class="m-doc">Type</a>&amp;, <a href="classcubos_1_1core_1_1memory_1_1Function.html" class="m-doc">memory::<wbr />Function</a>&lt;void(const <a href="classcubos_1_1core_1_1reflection_1_1Type.html" class="m-doc">Type</a>&amp;) const &gt;&amp;)
            </dt>
            <dd>Function type for discovering new types from a trait.</dd>
          </dl>
        </section>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-doc">
            <dt id="adc6a35ab4afde91541f910cd99ba80bc">
              <span class="m-doc-wrap-bumper"><a href="#adc6a35ab4afde91541f910cd99ba80bc" class="m-doc-self">TypeClient</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>Default constructor.</dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a30292b390cd488e399debc1264bac753" class="m-doc">addTrait</a>(</span><span class="m-doc-wrap">bool isStructural,
              const <a href="classcubos_1_1core_1_1reflection_1_1Type.html" class="m-doc">Type</a>&amp; traitType,
              <a href="#a42c8334706c1c7f49f19f20a0a7fef59" class="m-doc">Deserialize</a> deserialize,
              <a href="#ab928ed73a21229d942cbfbac60a6ca1c" class="m-doc">DiscoverTypes</a> discoverTypes)</span>
            </dt>
            <dd>Registers a trait to be supported by the channel.</dd>
            <dt>
              <div class="m-doc-template">template&lt;typename T&gt;</div>
              <span class="m-doc-wrap-bumper">void <a href="#a08f38909de8984ebb7c9d1c399831ac0" class="m-doc">addTrait</a>(</span><span class="m-doc-wrap">bool isStructural,
              <a href="#a42c8334706c1c7f49f19f20a0a7fef59" class="m-doc">Deserialize</a> deserialize,
              <a href="#ab928ed73a21229d942cbfbac60a6ca1c" class="m-doc">DiscoverTypes</a> discoverTypes)</span>
            </dt>
            <dd>Registers a trait to be supported by the channel.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a25c7c462c2f125160088f463cfd4f5f7" class="m-doc">addType</a>(</span><span class="m-doc-wrap">const <a href="classcubos_1_1core_1_1reflection_1_1Type.html" class="m-doc">Type</a>&amp; type)</span>
            </dt>
            <dd>Adds a known type to the channel.</dd>
            <dt>
              <div class="m-doc-template">template&lt;typename T&gt;</div>
              <span class="m-doc-wrap-bumper">void <a href="#a2a9c0a2eca2ddd36e8abbff21370d23e" class="m-doc">addType</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>Adds a known type to the channel.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a26913888a065ae76e3995a9378380aa5" class="m-doc">connect</a>(</span><span class="m-doc-wrap"><a href="classcubos_1_1core_1_1memory_1_1Stream.html" class="m-doc">memory::<wbr />Stream</a>&amp; stream) const -&gt; <a href="classcubos_1_1core_1_1memory_1_1Opt.html" class="m-doc">memory::<wbr />Opt</a>&lt;<a href="classcubos_1_1core_1_1reflection_1_1TypeClient_1_1Connection.html" class="m-doc">Connection</a>&gt;</span>
            </dt>
            <dd>Connects to a server, using the given stream.</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="a30292b390cd488e399debc1264bac753"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void cubos::<wbr />core::<wbr />reflection::<wbr />TypeClient::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a30292b390cd488e399debc1264bac753" class="m-doc-self">addTrait</a>(</span><span class="m-doc-wrap">bool isStructural,
              const <a href="classcubos_1_1core_1_1reflection_1_1Type.html" class="m-doc">Type</a>&amp; traitType,
              <a href="#a42c8334706c1c7f49f19f20a0a7fef59" class="m-doc">Deserialize</a> deserialize,
              <a href="#ab928ed73a21229d942cbfbac60a6ca1c" class="m-doc">DiscoverTypes</a> discoverTypes)</span></span>
            </h3>
            <p>Registers a trait to be supported by the channel.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">isStructural</td>
                  <td>Whether the trait is a structural trait.</td>
                </tr>
                <tr>
                  <td>traitType</td>
                  <td><a href="structcubos_1_1core_1_1reflection_1_1TypeClient_1_1Trait.html" class="m-doc">Trait</a> type to be registered.</td>
                </tr>
                <tr>
                  <td>deserialize</td>
                  <td>Function to deserialize the trait.</td>
                </tr>
                <tr>
                  <td>discoverTypes</td>
                  <td>Function to discover new types from the trait.</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-doc-details" id="a08f38909de8984ebb7c9d1c399831ac0"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;typename T&gt;
              </div>
              <span class="m-doc-wrap-bumper">void cubos::<wbr />core::<wbr />reflection::<wbr />TypeClient::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a08f38909de8984ebb7c9d1c399831ac0" class="m-doc-self">addTrait</a>(</span><span class="m-doc-wrap">bool isStructural,
              <a href="#a42c8334706c1c7f49f19f20a0a7fef59" class="m-doc">Deserialize</a> deserialize,
              <a href="#ab928ed73a21229d942cbfbac60a6ca1c" class="m-doc">DiscoverTypes</a> discoverTypes)</span></span>
            </h3>
            <p>Registers a trait to be supported by the channel.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Template parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">T</td>
                  <td><a href="structcubos_1_1core_1_1reflection_1_1TypeClient_1_1Trait.html" class="m-doc">Trait</a> type.</td>
                </tr>
              </tbody>
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td>isStructural</td>
                  <td>Whether the trait is a structural trait.</td>
                </tr>
                <tr>
                  <td>deserialize</td>
                  <td>Function to deserialize the trait.</td>
                </tr>
                <tr>
                  <td>discoverTypes</td>
                  <td>Function to discover new types from the trait.</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-doc-details" id="a25c7c462c2f125160088f463cfd4f5f7"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void cubos::<wbr />core::<wbr />reflection::<wbr />TypeClient::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a25c7c462c2f125160088f463cfd4f5f7" class="m-doc-self">addType</a>(</span><span class="m-doc-wrap">const <a href="classcubos_1_1core_1_1reflection_1_1Type.html" class="m-doc">Type</a>&amp; type)</span></span>
            </h3>
            <p>Adds a known type to the channel.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">type</td>
                  <td><a href="classcubos_1_1core_1_1reflection_1_1Type.html" class="m-doc">Type</a>.</td>
                </tr>
              </tbody>
            </table>
<p>This allows the channel to reuse the given type instead of creating a new runtime type when connecting to a server.</p><aside class="m-note m-info"><h4>Note</h4><p>The type must be default constructible.</p></aside>
          </div></section>
          <section class="m-doc-details" id="a2a9c0a2eca2ddd36e8abbff21370d23e"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;typename T&gt;
              </div>
              <span class="m-doc-wrap-bumper">void cubos::<wbr />core::<wbr />reflection::<wbr />TypeClient::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a2a9c0a2eca2ddd36e8abbff21370d23e" class="m-doc-self">addType</a>(</span><span class="m-doc-wrap">)</span></span>
            </h3>
            <p>Adds a known type to the channel.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Template parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">T</td>
                  <td><a href="classcubos_1_1core_1_1reflection_1_1Type.html" class="m-doc">Type</a>.</td>
                </tr>
              </tbody>
            </table>
<p>This allows the channel to reuse the given type instead of creating a new runtime type when connecting to a server.</p><aside class="m-note m-info"><h4>Note</h4><p>The type must be default constructible.</p></aside>
          </div></section>
          <section class="m-doc-details" id="a26913888a065ae76e3995a9378380aa5"><div>
            <h3>
              <span class="m-doc-wrap-bumper"><a href="classcubos_1_1core_1_1memory_1_1Opt.html" class="m-doc">memory::<wbr />Opt</a>&lt;<a href="classcubos_1_1core_1_1reflection_1_1TypeClient_1_1Connection.html" class="m-doc">Connection</a>&gt; cubos::<wbr />core::<wbr />reflection::<wbr />TypeClient::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a26913888a065ae76e3995a9378380aa5" class="m-doc-self">connect</a>(</span><span class="m-doc-wrap"><a href="classcubos_1_1core_1_1memory_1_1Stream.html" class="m-doc">memory::<wbr />Stream</a>&amp; stream) const</span></span>
            </h3>
            <p>Connects to a server, using the given stream.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">stream</td>
                  <td>Stream.</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td><a href="classcubos_1_1core_1_1reflection_1_1TypeClient_1_1Connection.html" class="m-doc">Connection</a> information, or nothing if the connection failed.</td>
                </tr>
              </tfoot>
            </table>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v2.js"></script>
<script src="searchdata-v2.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Cubos Docs. Created with <a href="https://doxygen.org/">Doxygen</a> 1.9.1 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
